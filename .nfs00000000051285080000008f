  0%|          | 0/10 [00:00<?, ?it/s]/aloy/home/ymartins/match_clinical_trial/ner_subproj/downstream_experiments/eda_semantic.py:739: LangChainDeprecationWarning: The method `Chain.__call__` was deprecated in langchain 0.1.0 and will be removed in 1.0. Use :meth:`~invoke` instead.
  result = chain( q )
 10%|â–ˆ         | 1/10 [01:20<12:07, 80.82s/it] 20%|â–ˆâ–ˆ        | 2/10 [02:24<09:24, 70.51s/it] 30%|â–ˆâ–ˆâ–ˆ       | 3/10 [03:27<07:51, 67.30s/it] 40%|â–ˆâ–ˆâ–ˆâ–ˆ      | 4/10 [04:33<06:41, 66.92s/it] 50%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     | 5/10 [05:36<05:26, 65.38s/it] 60%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    | 6/10 [06:39<04:18, 64.59s/it] 70%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   | 7/10 [07:42<03:11, 63.96s/it] 80%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 8/10 [08:45<02:07, 63.77s/it] 90%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 9/10 [09:48<01:03, 63.62s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10/10 [10:52<00:00, 63.53s/it]100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10/10 [10:52<00:00, 65.23s/it]


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX nf: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>
PREFIX ner: <http://www.cs.man.ac.uk/~stevensr/ontology/ner.owl#>

SELECT DISTINCT ?experimentName ?entityName
WHERE {
  ?experiment rdf:type nf:NLPExperiment .
  ?experiment rdfs:label ?experimentName .
  ?entity rdf:type ner:NamedEntity .
  ?entity rdfs:label ?entityName .
  ?experiment onto:hasOutput ?output .
  ?output rdf:type onto:LabeledDataset .
  ?output onto:datasetHasData ?data .
  ?data rdf:subject ?entity .
}
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'Get the distinct names of named entities used in each experiment', 'result': 'I am sorry, I cannot provide an answer to this question as there is no information available.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX nerfair: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>
PREFIX xhani: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>

SELECT ?experiment (COUNT(DISTINCT ?model) AS ?numberOfModels) (COUNT(DISTINCT ?dataset) AS ?numberOfDatasets)
WHERE {
  ?experiment rdf:type nerfair:NLPExperiment .
  OPTIONAL { ?experiment nerfair:generatesModel ?model . }
  OPTIONAL { ?experiment nerfair:generatesDataset ?dataset . }
}
GROUP BY ?experiment
[0m
Full Context:
[32;1m[1;3m[(rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_4f9e5571'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer'))), (rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_a5f8e479'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer'))), (rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_a8c1207e'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer'))), (rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_d101896b'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer'))), (rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_dfb94d42'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer'))), (rdflib.term.URIRef('https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#exp_eeb3e555'), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')), rdflib.term.Literal('0', datatype=rdflib.term.URIRef('http://www.w3.org/2001/XMLSchema#integer')))][0m

[1m> Finished chain.[0m
{'query': 'Retrieve the number of models and datasets by experiment', 'result': 'The number of models and datasets are both 0 for the following experiments: exp_4f9e5571, exp_a5f8e479, exp_a8c1207e, exp_d101896b, exp_dfb94d42, and exp_eeb3e555.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX nerfair: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>

SELECT DISTINCT ?evaluationMetric
WHERE {
  ?evaluationSetting nerfair:fromEvaluationMetric ?evaluationMetric .
}
[0m
Full Context:
[32;1m[1;3m[(rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000608'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000415'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000233'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000628'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000630'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000416'),), (rdflib.term.URIRef('http://purl.obolibrary.org/obo/STATO_0000524'),)][0m

[1m> Finished chain.[0m
{'query': 'Get the distinct evaluation metrics used to evaluate the models', 'result': 'The evaluation metrics used to evaluate the models are: STATO_0000608, STATO_0000415, STATO_0000233, STATO_0000628, STATO_0000630, STATO_0000416, and STATO_0000524.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX nerfair: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>

SELECT DISTINCT ?statsFunction
WHERE {
  ?evaluationMetric nerfair:aggregatedByStatsFunction ?statsFunction .
}
[0m
Full Context:
[32;1m[1;3m[(rdflib.term.Literal('std', lang='en'),), (rdflib.term.Literal('median', lang='en'),), (rdflib.term.Literal('max', lang='en'),), (rdflib.term.Literal('min', lang='en'),), (rdflib.term.Literal('mean', lang='en'),)][0m

[1m> Finished chain.[0m
{'query': 'Get the distinct statistical functions used to aggregate the evaluation metrics', 'result': 'The distinct statistical functions used to aggregate the evaluation metrics are: std, median, max, min, and mean.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>

SELECT DISTINCT ?evaluationTechniqueName
WHERE {
  ?evaluation onto:MLEvaluationTechniqueName ?evaluationTechniqueName .
}
[0m
Full Context:
[32;1m[1;3m[(rdflib.term.Literal('sk-with-prefix', lang='en'),), (rdflib.term.Literal('seqeval-default', lang='en'),), (rdflib.term.Literal('seqeval-strict', lang='en'),), (rdflib.term.Literal('sk-without-prefix', lang='en'),)][0m

[1m> Finished chain.[0m
{'query': 'Get the distinct evaluation techniques used in the experiments', 'result': 'The experiments used the following distinct evaluation techniques: sk-with-prefix, seqeval-default, seqeval-strict, and sk-without-prefix.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>

SELECT ?parameterName ?parameterValue
WHERE {
  ?parameterSettings onto:HasParameter ?parameterCharacteristic .
  ?parameterCharacteristic a onto:ParameterCharacteristic .
  ?parameterCharacteristic onto:ParameterName ?parameterName .
  ?parameterCharacteristic onto:ParameterValue ?parameterValue .
}
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'Retrieve he name and value of the hyperparameters used by each model', 'result': "I'm sorry, but I do not have any information about the names and values of hyperparameters used by each model."}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>

SELECT ?dataset ?numberOfInstances
WHERE {
  ?trainSet a onto:TrainSet .
  ?trainSet onto:datasetHasData ?dataset .
  ?dataset onto:NumberOfInstances ?numberOfInstances .
}
ORDER BY DESC(?numberOfInstances)
LIMIT 1
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'what is the largest dataset used in the train context', 'result': 'I am sorry, but I do not have the information necessary to answer this question.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>
PREFIX nerfair: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>

SELECT ?evaluationTechnique
WHERE {
  ?evaluation ?type onto:MLModelEvaluation .
  ?evaluation nerfair:hasScore ?score .
  ?score nerfair:belongsToEntity "mcc" .
  ?score nerfair:hasValue ?mccValue .
  ?evaluation onto:MLEvaluationTechniqueName ?evaluationTechnique .
  
  FILTER NOT EXISTS {
    ?otherEvaluation ?type onto:MLModelEvaluation .
    ?otherEvaluation nerfair:hasScore ?otherScore .
    ?otherScore nerfair:belongsToEntity "mcc" .
    ?otherScore nerfair:hasValue ?otherMccValue .
    ?otherEvaluation onto:MLEvaluationTechniqueName ?otherEvaluationTechnique .
    FILTER (?otherMccValue > ?mccValue)
  }
}
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'which evaluation technique is associated to the highest mcc values?', 'result': 'I am sorry, I cannot answer your question. The provided information does not contain any data about evaluation techniques or MCC values.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX nf: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>
PREFIX xhani: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>

SELECT ?experiment ?evaluationTechnique ?reportLevel ?entity
WHERE {
  ?experiment rdf:type nf:NLPExperiment .
  ?evaluation xhani:MLEvaluationTechniqueName ?evaluationTechnique .
  ?score nf:underContext ?evaluation .
  ?score nf:reportLevel ?reportLevel .
  ?score nf:belongsToEntity ?entity .
  ?score rdf:type nf:NEREvaluationMeasure .
  ?score rdfs:label "MCC" .
  ?evaluation nf:hasScore ?score .
}
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'For each experiment, retrieve the evaluation technique and the level that obtained the highest mcc values for each entity', 'result': 'I am sorry, I cannot provide an answer to this question as the data required to answer it is not available.'}


[1m> Entering new GraphSparqlQAChain chain...[0m
Identified intent:
[32;1m[1;3mSELECT[0m
Generated SPARQL:
[32;1m[1;3m
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX nf: <https://raw.githubusercontent.com/YasCoMa/ner-fair-workflow/refs/heads/master/nerfair_onto_extension.owl#>
PREFIX onto: <https://w3id.org/ontouml-models/model/xhani2023xmlpo/>
PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>

SELECT ?level ?technique ?entity ?maxValue
WHERE {
  ?score a nf:NEREvaluationMeasure .
  ?score nf:reportLevel ?level .
  ?score onto:MLEvaluationTechniqueName ?technique .
  ?score nf:belongsToEntity ?entity .
  ?score nf:isAggregatedValue "true"^^xsd:boolean .
  ?score nf:aggregatedByStatsFunction "max" .
  ?score nf:underContext "test" .
  ?score vcard:hasValue ?maxValue .
}
[0m
Full Context:
[32;1m[1;3m[][0m

[1m> Finished chain.[0m
{'query': 'For each level, technique and entitty, retireve the f1-score values aggregated by max per model in the test context?', 'result': 'I am sorry, I cannot provide an answer to this question because the provided information is empty.'}
rm: cannot remove '/aloy/home/ymartins/match_clinical_trial/experiments/biobert_trial//logs/*significance_analysis.ready': No such file or directory
[33mNextflow 25.04.8 is available - Please consider updating your version to it(B[m

 N E X T F L O W   ~  version 25.04.6

Launching `/aloy/home/ymartins/match_clinical_trial/ner_subproj/main.nf` [festering_cuvier] DSL2 - revision: 54782c8edf

 NER Fair workflow  -  P I P E L I N E
 ===================================
 dataDir       : /aloy/home/ymartins/match_clinical_trial/experiments/biobert_trial/
 runningConfig : /aloy/home/ymartins/match_clinical_trial/experiments/config_biobert_hypersearch.json
 mode       : significance_analysis
 
[-        ] setEnvironment                    -
[-        ] PROCESS_SignificanceAnalysisTasks -

executor >  local (1)
[28/a501de] setEnvironment                    [100%] 1 of 1 âœ”
[-        ] PROCESS_SignificanceAnalysisTasks [  0%] 0 of 1

executor >  local (2)
[28/a501de] setEnvironment                    [100%] 1 of 1 âœ”
[9c/9042f6] PROCESS_SignificanceAnalysisTasks [  0%] 0 of 1

executor >  local (2)
[28/a501de] setEnvironment                    [100%] 1 of 1 âœ”
[9c/9042f6] PROCESS_SignificanceAnalysisTasks [  0%] 0 of 1
ERROR ~ Error executing process > 'PROCESS_SignificanceAnalysisTasks'

Caused by:
  Process `PROCESS_SignificanceAnalysisTasks` terminated with an error exit status (1)


Command executed:

  python3 /aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py -execDir biobert_trial -paramFile config_biobert_hypersearch.json

Command exit status:
  1

Command output:
  (empty)

Command error:
  Traceback (most recent call last):
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 252, in <module>
      i.run()
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 247, in run
      self.perform_stats_analysis_per_entity()
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 224, in perform_stats_analysis_per_entity
      entity, metric = k.split('#$@')
  ValueError: not enough values to unpack (expected 2, got 1)

Work dir:
  /aloy/home/ymartins/match_clinical_trial/ner_subproj/work/9c/9042f61a77f6a9d812084f7d29b936

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`

 -- Check '.nextflow.log' file for details
Oops .. something went wrong

executor >  local (2)
[28/a501de] setEnvironment                    [100%] 1 of 1 âœ”
[9c/9042f6] PROCESS_SignificanceAnalysisTasks [  0%] 0 of 1 âœ˜
ERROR ~ Error executing process > 'PROCESS_SignificanceAnalysisTasks'

Caused by:
  Process `PROCESS_SignificanceAnalysisTasks` terminated with an error exit status (1)


Command executed:

  python3 /aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py -execDir biobert_trial -paramFile config_biobert_hypersearch.json

Command exit status:
  1

Command output:
  (empty)

Command error:
  Traceback (most recent call last):
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 252, in <module>
      i.run()
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 247, in run
      self.perform_stats_analysis_per_entity()
    File "/aloy/home/ymartins/match_clinical_trial/ner_subproj/modules/significance_analysis.py", line 224, in perform_stats_analysis_per_entity
      entity, metric = k.split('#$@')
  ValueError: not enough values to unpack (expected 2, got 1)

Work dir:
  /aloy/home/ymartins/match_clinical_trial/ner_subproj/work/9c/9042f61a77f6a9d812084f7d29b936

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`

 -- Check '.nextflow.log' file for details

rm: cannot remove '/aloy/home/ymartins/match_clinical_trial/experiments/biobert_trial//logs/*significance_analysis.ready': No such file or directory
[33mNextflow 25.04.8 is available - Please consider updating your version to it(B[m

 N E X T F L O W   ~  version 25.04.6

Launching `/aloy/home/ymartins/match_clinical_trial/ner_subproj/main.nf` [kickass_ptolemy] DSL2 - revision: 54782c8edf

 NER Fair workflow  -  P I P E L I N E
 ===================================
 dataDir       : /aloy/home/ymartins/match_clinical_trial/experiments/biobert_trial/
 runningConfig : /aloy/home/ymartins/match_clinical_trial/experiments/config_biobert_hypersearch.json
 mode       : significance_analysis
 
